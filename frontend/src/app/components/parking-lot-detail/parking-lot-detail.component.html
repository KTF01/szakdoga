<app-pop-up *ngIf="popupIsOpen" (closeEvent)="closePopUp()" (okEvent)="deleteParkingLot()" [okText]="'Igen'">
  <h3>Biztos törölni akarod?</h3>
</app-pop-up>

<app-pop-up *ngIf="popUp2IsOpen" (closeEvent)="closePopUp2()" (okEvent)="submitEditForm()">
  <form #form="ngForm" (ngSubmit)="onEditSubmit()" class="form-group">
    <label for="nameEditInput">Név:</label>
    <input class="form-control" id="nameEditInput" type="text" required name="newNameInput" placeholder="Új név" [ngModel]="parkingLot.name">
  </form>
</app-pop-up>

<app-pop-up *ngIf="popUp3IsOpen" (closeEvent)="closePopUp3()" [actionButtons]="false">
  <ul class="user-list" *ngIf="isUsersView;else carView">
    <h3>Felhasználók</h3>
    <li *ngFor="let user of userService.users" (click)="changeView(user)">
      <div class="card user-list-item">{{user.firstName}} {{user.lastName}}</div>
    </li>
  </ul>
  <ng-template #carView>
    <h3>Autók:</h3>
    <ul class="car-list" *ngIf="selectedUser.ownedCars.length>0;else noCar">
      <li *ngFor="let car of selectedUser.ownedCars" (click)="parkIn(car)">
        <div class="card car-list-item">
          {{car.plateNumber}}
        </div>
      </li>
    </ul>
    <ng-template #noCar><div>Ennek a felhasználónak nincs autója nyilvámntartva!</div></ng-template>
  </ng-template>
</app-pop-up>

<app-pop-up *ngIf="popUp4IsOpen" (closeEvent)="closePopUp4()" (okEvent)="sendReservation(reservForm)">
  <form #reservForm="ngForm">
    <!-- <div class="form-group ">
      <label for="fromDate">Mettől</label>
      <div class="container">
        <div class="row justify-content-md-between">
          <input class="form-control col-md-8" type="date" name="fromDateInput" id="fromDate">
          <select class="form-control col-md-4" name="hourSelectInput" id="hourSelect">
            <option *ngFor="let i of [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]" value="{{i}}">
              <span *ngIf="i<10">0</span>{{i}}:00
            </option>
          </select>
        </div>
      </div>
    </div> -->
    <div class="form-group">
      <label for="fromDate">Mennyi ideig:</label>
      <select class="form-control" name="durationSelectInput" id="durationSelect" [ngModel]='1'>
        <option *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]" value="{{i}}">
          {{i}} óra
        </option>
      </select>
    </div>
  </form>
</app-pop-up>

<div class="container">
  <div class="row justify-content-sm-between">
    <div>
      <h1>{{parkingLot.name}}</h1>
      <h2>Parkolóház: {{parkingLot.sector.parkHouse.name}}</h2>
      <h2>Szektor: {{parkingLot.sector.name}}</h2>
      <h2>{{parkingLot.isReserved? 'Le van foglalva': 'Nem foglalja senki'}}</h2>
      <h2 *ngIf="parkingLot.isReserved">res: {{parkingLot.reservation.user.firstName}}</h2>
    </div>

    <div *ngIf="isAdmin" class="buttons">
      <button class="btn btn-primary" (click)="openPopUp2()">
        <fa-icon [icon]="editIcon"></fa-icon>
      </button>
      <button class="btn btn-danger" (click)="openPopUp()">
        <fa-icon [icon]="trashIcon"></fa-icon>
      </button>
    </div>
  </div>
  <div class="pl-car-container">
    <div *ngIf="parkingLot.occupiingCar;else emptyPl">
      <div class="car-detail-container row">
        <div class="car-details-icon col-md-4">
          <fa-icon [icon]="carIcon"></fa-icon>
        </div>
        <div class="car-text-details col-md-8">
          <p>Autó: {{parkingLot.occupiingCar.plateNumber}}</p>
          <p>Tulaj: {{parkingLot.occupiingCar.owner.firstName}} {{parkingLot.occupiingCar.owner.lastName}}</p>
        </div>
      </div>
    </div>
    <ng-template #emptyPl>
      <div class="no-car"><h1>Üres</h1></div>
    </ng-template>
    <div class="no-car">
      <button class="btn btn-primary" (click)="parkingLot.occupiingCar? parkOut() :openPopUp3()"
      *ngIf="isParkActionShown">{{parkingLot.occupiingCar?'Kiállás':'Beállás'}}</button>
    </div>
    <div class="reserv-button">
      <button class="btn btn-primary" (click)="openPopUp4()">{{parkingLot.isReserved? 'Foglalás törlése':'Fogaláls'}}</button>
    </div>
  </div>

</div>
